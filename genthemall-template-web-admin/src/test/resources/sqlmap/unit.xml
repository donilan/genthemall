<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.ii2d.model">

	<!-- result map for com.ii2d.Unit -->
	<resultMap type="com.ii2d.model.Unit" id="unit">
	<result column="id" property="id" javaType="java.lang.Integer"/>
	<result column="old_id" property="oldId" javaType="java.lang.String"/>
	<result column="unit_type_id" property="unitTypeId" javaType="java.lang.Integer"/>
	<result column="name" property="name" javaType="java.lang.String"/>
	<result column="show_order" property="showOrder" javaType="java.lang.Integer"/>
	<result column="pin_yin_name" property="pinYinName" javaType="java.lang.String"/>
	<result column="simple_pin_yin_name" property="simplePinYinName" javaType="java.lang.String"/>
	</resultMap>
	

	<!-- select by id sql -->
	<select id="select_by_id_Unit" useCache="true" resultMap="unit" >
		SELECT * FROM unit WHERE id = #{value}
	</select>

	<select id="select_Unit" resultMap="unit" >
		SELECT * FROM unit
		<trim prefix="WHERE" prefixOverrides="OR|AND">
			
			<if test="orEq.oldId != null">OR old_id = #{orEq.oldId}</if>
			<if test="orLike.oldId != null">OR old_id LIKE concat('%', #{orLike.oldId}, '%')</if>
			<if test="andEq.oldId != null">AND old_id = #{andEq.oldId}</if>
			<if test="andLike.oldId != null">AND old_id LIKE concat('%', #{andLike.oldId}, '%')</if>
			
			<if test="orEq.unitTypeId != null">OR unit_type_id = #{orEq.unitTypeId}</if>
			<if test="orLike.unitTypeId != null">OR unit_type_id LIKE concat('%', #{orLike.unitTypeId}, '%')</if>
			<if test="andEq.unitTypeId != null">AND unit_type_id = #{andEq.unitTypeId}</if>
			<if test="andLike.unitTypeId != null">AND unit_type_id LIKE concat('%', #{andLike.unitTypeId}, '%')</if>
			
			<if test="orEq.name != null">OR name = #{orEq.name}</if>
			<if test="orLike.name != null">OR name LIKE concat('%', #{orLike.name}, '%')</if>
			<if test="andEq.name != null">AND name = #{andEq.name}</if>
			<if test="andLike.name != null">AND name LIKE concat('%', #{andLike.name}, '%')</if>
			
			<if test="orEq.showOrder != null">OR show_order = #{orEq.showOrder}</if>
			<if test="orLike.showOrder != null">OR show_order LIKE concat('%', #{orLike.showOrder}, '%')</if>
			<if test="andEq.showOrder != null">AND show_order = #{andEq.showOrder}</if>
			<if test="andLike.showOrder != null">AND show_order LIKE concat('%', #{andLike.showOrder}, '%')</if>
			
			<if test="orEq.pinYinName != null">OR pin_yin_name = #{orEq.pinYinName}</if>
			<if test="orLike.pinYinName != null">OR pin_yin_name LIKE concat('%', #{orLike.pinYinName}, '%')</if>
			<if test="andEq.pinYinName != null">AND pin_yin_name = #{andEq.pinYinName}</if>
			<if test="andLike.pinYinName != null">AND pin_yin_name LIKE concat('%', #{andLike.pinYinName}, '%')</if>
			
			<if test="orEq.simplePinYinName != null">OR simple_pin_yin_name = #{orEq.simplePinYinName}</if>
			<if test="orLike.simplePinYinName != null">OR simple_pin_yin_name LIKE concat('%', #{orLike.simplePinYinName}, '%')</if>
			<if test="andEq.simplePinYinName != null">AND simple_pin_yin_name = #{andEq.simplePinYinName}</if>
			<if test="andLike.simplePinYinName != null">AND simple_pin_yin_name LIKE concat('%', #{andLike.simplePinYinName}, '%')</if>
			
			
		</trim>
		<choose>
			<when test="limitStartRow gt -1 and limitEndRow gt 0" >
				LIMIT #{limitStartRow}, #{limitEndRow}
			</when>
			<when test="orderBy.size gt 0">
				ORDER BY 
				<trim suffixOverrides=",">
					<foreach collection="orderBy" item="it">${it}, </foreach>
				</trim>
			</when>
		</choose>
	</select>
	<!-- Count table. -->
	<select id="count_Unit" resultType="java.lang.Long">
		SELECT COUNT(1) FROM unit
		<trim prefix="WHERE" prefixOverrides="OR|AND">
			
			<if test="orEq.oldId != null">OR old_id = #{orEq.oldId}</if>
			<if test="orLike.oldId != null">OR old_id LIKE concat('%', #{orLike.oldId}, '%')</if>
			<if test="andEq.oldId != null">AND old_id = #{andEq.oldId}</if>
			<if test="andLike.oldId != null">AND old_id LIKE concat('%', #{andLike.oldId}, '%')</if>
			
			<if test="orEq.unitTypeId != null">OR unit_type_id = #{orEq.unitTypeId}</if>
			<if test="orLike.unitTypeId != null">OR unit_type_id LIKE concat('%', #{orLike.unitTypeId}, '%')</if>
			<if test="andEq.unitTypeId != null">AND unit_type_id = #{andEq.unitTypeId}</if>
			<if test="andLike.unitTypeId != null">AND unit_type_id LIKE concat('%', #{andLike.unitTypeId}, '%')</if>
			
			<if test="orEq.name != null">OR name = #{orEq.name}</if>
			<if test="orLike.name != null">OR name LIKE concat('%', #{orLike.name}, '%')</if>
			<if test="andEq.name != null">AND name = #{andEq.name}</if>
			<if test="andLike.name != null">AND name LIKE concat('%', #{andLike.name}, '%')</if>
			
			<if test="orEq.showOrder != null">OR show_order = #{orEq.showOrder}</if>
			<if test="orLike.showOrder != null">OR show_order LIKE concat('%', #{orLike.showOrder}, '%')</if>
			<if test="andEq.showOrder != null">AND show_order = #{andEq.showOrder}</if>
			<if test="andLike.showOrder != null">AND show_order LIKE concat('%', #{andLike.showOrder}, '%')</if>
			
			<if test="orEq.pinYinName != null">OR pin_yin_name = #{orEq.pinYinName}</if>
			<if test="orLike.pinYinName != null">OR pin_yin_name LIKE concat('%', #{orLike.pinYinName}, '%')</if>
			<if test="andEq.pinYinName != null">AND pin_yin_name = #{andEq.pinYinName}</if>
			<if test="andLike.pinYinName != null">AND pin_yin_name LIKE concat('%', #{andLike.pinYinName}, '%')</if>
			
			<if test="orEq.simplePinYinName != null">OR simple_pin_yin_name = #{orEq.simplePinYinName}</if>
			<if test="orLike.simplePinYinName != null">OR simple_pin_yin_name LIKE concat('%', #{orLike.simplePinYinName}, '%')</if>
			<if test="andEq.simplePinYinName != null">AND simple_pin_yin_name = #{andEq.simplePinYinName}</if>
			<if test="andLike.simplePinYinName != null">AND simple_pin_yin_name LIKE concat('%', #{andLike.simplePinYinName}, '%')</if>
			
			AND null
		</trim>
	</select>
	
	<insert id="insert_Unit" parameterType="com.ii2d.model.Unit">
		INSERT INTO unit (old_id, unit_type_id, name, show_order, pin_yin_name, simple_pin_yin_name)
		VALUES (#{oldId}
			, #{unitTypeId}
			, #{name}
			, #{showOrder}
			, #{pinYinName}
			, #{simplePinYinName}
			)
		
		<selectKey resultType="java.lang.Integer" order="AFTER" keyProperty="id">
			SELECT LAST_INSERT_ID()
		</selectKey>
	</insert>


	<update id="update_Unit" parameterType="com.ii2d.model.Unit">
		UPDATE unit SET
		<trim prefixOverrides=",">
			
			<if test="oldId != null">, old_id = #{oldId}</if>
			<if test="unitTypeId != null">, unit_type_id = #{unitTypeId}</if>
			<if test="name != null">, name = #{name}</if>
			<if test="showOrder != null">, show_order = #{showOrder}</if>
			<if test="pinYinName != null">, pin_yin_name = #{pinYinName}</if>
			<if test="simplePinYinName != null">, simple_pin_yin_name = #{simplePinYinName}</if>
		</trim>
		WHERE id = #{id}
	</update>
	

	<delete id="delete_Unit" >
	
		DELETE FROM unit WHERE id = #{id}
	
	</delete>

</mapper>